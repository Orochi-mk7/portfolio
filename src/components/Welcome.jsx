import { useEffect, useRef } from 'react';

export default function AnimatedText(props) {
  const pathRef = useRef(null);
  const fillRef = useRef(null);

  useEffect(() => {
    const path = pathRef.current;
    const fill = fillRef.current;
    const length = path.getTotalLength();

    path.style.strokeDasharray = length;
    path.style.strokeDashoffset = length;

    // Animate stroke draw
    path.getBoundingClientRect(); // Force reflow
    path.style.transition = 'stroke-dashoffset 5s ease-in-out';
    path.style.strokeDashoffset = '0';

    // Animate fill fade-in after delay
    setTimeout(() => {
      fill.style.opacity = 1;
    }, 700); // Match stroke animation duration
  }, []);

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 9.47 216.41 36.38"
      className={props.className}
    >
      {/* Stroke layer (draws itself) */}
      <path
        ref={pathRef}
        d="M9.50 45.26L0 9.47L4.86 9.47L10.30 32.93Q11.18 36.62 11.82 40.26Q13.18 34.52 13.43 33.64L20.24 9.47L25.95 9.47L31.08 27.59Q33.01 34.33 33.86 40.26Q34.55 36.87 35.64 32.47L41.26 9.47L46.02 9.47L36.21 45.26L31.64 45.26L24.10 17.99Q23.14 14.58 22.97 13.79Q22.41 16.26 21.92 17.99L14.33 45.26L9.50 45.26ZM66.72 36.91L71.26 37.48Q70.19 41.46 67.29 43.65Q64.38 45.85 59.86 45.85Q54.17 45.85 50.84 42.35Q47.51 38.84 47.51 32.52Q47.51 25.98 50.88 22.36Q54.25 18.75 59.62 18.75Q64.82 18.75 68.12 22.29Q71.41 25.83 71.41 32.25Q71.41 32.64 71.39 33.42L52.05 33.42Q52.29 37.70 54.47 39.97Q56.64 42.24 59.89 42.24Q62.30 42.24 64.01 40.97Q65.72 39.70 66.72 36.91M52.29 29.81L66.77 29.81Q66.48 26.54 65.11 24.90Q63.01 22.36 59.67 22.36Q56.64 22.36 54.58 24.39Q52.51 26.42 52.29 29.81ZM76.68 45.26L76.68 9.47L81.08 9.47L81.08 45.26L76.68 45.26ZM104.81 35.77L109.13 36.33Q108.42 40.80 105.51 43.32Q102.59 45.85 98.34 45.85Q93.02 45.85 89.78 42.37Q86.55 38.89 86.55 32.40Q86.55 28.20 87.94 25.05Q89.33 21.90 92.18 20.32Q95.02 18.75 98.36 18.75Q102.59 18.75 105.27 20.89Q107.96 23.02 108.72 26.95L104.44 27.61Q103.83 25 102.28 23.68Q100.73 22.36 98.54 22.36Q95.21 22.36 93.14 24.74Q91.06 27.12 91.06 32.28Q91.06 37.50 93.07 39.87Q95.07 42.24 98.29 42.24Q100.88 42.24 102.61 40.65Q104.35 39.06 104.81 35.77ZM111.25 32.30Q111.25 25.10 115.26 21.63Q118.60 18.75 123.41 18.75Q128.76 18.75 132.15 22.25Q135.55 25.76 135.55 31.93Q135.55 36.94 134.05 39.81Q132.54 42.68 129.68 44.26Q126.81 45.85 123.41 45.85Q117.97 45.85 114.61 42.36Q111.25 38.87 111.25 32.30M115.77 32.30Q115.77 37.28 117.94 39.76Q120.12 42.24 123.41 42.24Q126.68 42.24 128.86 39.75Q131.03 37.26 131.03 32.15Q131.03 27.34 128.85 24.87Q126.66 22.39 123.41 22.39Q120.12 22.39 117.94 24.85Q115.77 27.32 115.77 32.30ZM140.70 45.26L140.70 19.34L144.63 19.34L144.63 22.97Q145.85 21.07 147.88 19.91Q149.90 18.75 152.49 18.75Q155.37 18.75 157.21 19.95Q159.06 21.14 159.81 23.29Q162.89 18.75 167.82 18.75Q171.68 18.75 173.75 20.89Q175.83 23.02 175.83 27.47L175.83 45.26L171.46 45.26L171.46 28.93Q171.46 26.29 171.03 25.13Q170.61 23.97 169.48 23.27Q168.36 22.56 166.85 22.56Q164.11 22.56 162.30 24.38Q160.50 26.20 160.50 30.20L160.50 45.26L156.10 45.26L156.10 28.42Q156.10 25.49 155.03 24.02Q153.96 22.56 151.51 22.56Q149.66 22.56 148.08 23.54Q146.51 24.51 145.80 26.39Q145.09 28.27 145.09 31.81L145.09 45.26L140.70 45.26ZM200.10 36.91L204.64 37.48Q203.56 41.46 200.66 43.65Q197.75 45.85 193.24 45.85Q187.55 45.85 184.22 42.35Q180.88 38.84 180.88 32.52Q180.88 25.98 184.25 22.36Q187.62 18.75 192.99 18.75Q198.19 18.75 201.49 22.29Q204.79 25.83 204.79 32.25Q204.79 32.64 204.76 33.42L185.42 33.42Q185.67 37.70 187.84 39.97Q190.01 42.24 193.26 42.24Q195.68 42.24 197.39 40.97Q199.10 39.70 200.10 36.91M185.67 29.81L200.15 29.81Q199.85 26.54 198.49 24.90Q196.39 22.36 193.04 22.36Q190.01 22.36 187.95 24.39Q185.89 26.42 185.67 29.81ZM211.40 45.26L211.40 40.26L216.41 40.26L216.41 45.26L211.40 45.26Z"
        fill="none"
        stroke="white"
        strokeWidth="1.5"
      />

      {/* Fill layer (fades in) */}
      <path
        ref={fillRef}
        d="M9.50 45.26L0 9.47L4.86 9.47L10.30 32.93Q11.18 36.62 11.82 40.26Q13.18 34.52 13.43 33.64L20.24 9.47L25.95 9.47L31.08 27.59Q33.01 34.33 33.86 40.26Q34.55 36.87 35.64 32.47L41.26 9.47L46.02 9.47L36.21 45.26L31.64 45.26L24.10 17.99Q23.14 14.58 22.97 13.79Q22.41 16.26 21.92 17.99L14.33 45.26L9.50 45.26ZM66.72 36.91L71.26 37.48Q70.19 41.46 67.29 43.65Q64.38 45.85 59.86 45.85Q54.17 45.85 50.84 42.35Q47.51 38.84 47.51 32.52Q47.51 25.98 50.88 22.36Q54.25 18.75 59.62 18.75Q64.82 18.75 68.12 22.29Q71.41 25.83 71.41 32.25Q71.41 32.64 71.39 33.42L52.05 33.42Q52.29 37.70 54.47 39.97Q56.64 42.24 59.89 42.24Q62.30 42.24 64.01 40.97Q65.72 39.70 66.72 36.91M52.29 29.81L66.77 29.81Q66.48 26.54 65.11 24.90Q63.01 22.36 59.67 22.36Q56.64 22.36 54.58 24.39Q52.51 26.42 52.29 29.81ZM76.68 45.26L76.68 9.47L81.08 9.47L81.08 45.26L76.68 45.26ZM104.81 35.77L109.13 36.33Q108.42 40.80 105.51 43.32Q102.59 45.85 98.34 45.85Q93.02 45.85 89.78 42.37Q86.55 38.89 86.55 32.40Q86.55 28.20 87.94 25.05Q89.33 21.90 92.18 20.32Q95.02 18.75 98.36 18.75Q102.59 18.75 105.27 20.89Q107.96 23.02 108.72 26.95L104.44 27.61Q103.83 25 102.28 23.68Q100.73 22.36 98.54 22.36Q95.21 22.36 93.14 24.74Q91.06 27.12 91.06 32.28Q91.06 37.50 93.07 39.87Q95.07 42.24 98.29 42.24Q100.88 42.24 102.61 40.65Q104.35 39.06 104.81 35.77ZM111.25 32.30Q111.25 25.10 115.26 21.63Q118.60 18.75 123.41 18.75Q128.76 18.75 132.15 22.25Q135.55 25.76 135.55 31.93Q135.55 36.94 134.05 39.81Q132.54 42.68 129.68 44.26Q126.81 45.85 123.41 45.85Q117.97 45.85 114.61 42.36Q111.25 38.87 111.25 32.30M115.77 32.30Q115.77 37.28 117.94 39.76Q120.12 42.24 123.41 42.24Q126.68 42.24 128.86 39.75Q131.03 37.26 131.03 32.15Q131.03 27.34 128.85 24.87Q126.66 22.39 123.41 22.39Q120.12 22.39 117.94 24.85Q115.77 27.32 115.77 32.30ZM140.70 45.26L140.70 19.34L144.63 19.34L144.63 22.97Q145.85 21.07 147.88 19.91Q149.90 18.75 152.49 18.75Q155.37 18.75 157.21 19.95Q159.06 21.14 159.81 23.29Q162.89 18.75 167.82 18.75Q171.68 18.75 173.75 20.89Q175.83 23.02 175.83 27.47L175.83 45.26L171.46 45.26L171.46 28.93Q171.46 26.29 171.03 25.13Q170.61 23.97 169.48 23.27Q168.36 22.56 166.85 22.56Q164.11 22.56 162.30 24.38Q160.50 26.20 160.50 30.20L160.50 45.26L156.10 45.26L156.10 28.42Q156.10 25.49 155.03 24.02Q153.96 22.56 151.51 22.56Q149.66 22.56 148.08 23.54Q146.51 24.51 145.80 26.39Q145.09 28.27 145.09 31.81L145.09 45.26L140.70 45.26ZM200.10 36.91L204.64 37.48Q203.56 41.46 200.66 43.65Q197.75 45.85 193.24 45.85Q187.55 45.85 184.22 42.35Q180.88 38.84 180.88 32.52Q180.88 25.98 184.25 22.36Q187.62 18.75 192.99 18.75Q198.19 18.75 201.49 22.29Q204.79 25.83 204.79 32.25Q204.79 32.64 204.76 33.42L185.42 33.42Q185.67 37.70 187.84 39.97Q190.01 42.24 193.26 42.24Q195.68 42.24 197.39 40.97Q199.10 39.70 200.10 36.91M185.67 29.81L200.15 29.81Q199.85 26.54 198.49 24.90Q196.39 22.36 193.04 22.36Q190.01 22.36 187.95 24.39Q185.89 26.42 185.67 29.81ZM211.40 45.26L211.40 40.26L216.41 40.26L216.41 45.26L211.40 45.26Z"
        fill="white"
        stroke="none"
        opacity="0"
        style={{ transition: 'opacity 3s ease-in-out' }}
      />
    </svg>
  );
}